@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<div class="text-center">
    <h1 class="display-4">This is a list of Products</h1>
    <input type="text" id="searchInput" placeholder="Search products...">
    <table class="table table-bordered">
        <thead>
            <tr>
                <th scope="col" data-sort="ProductID">Product ID</th>
                <th scope="col" data-sort="ProductName">Product Name</th>
                <th scope="col" data-sort="Quantity">Quantity</th>
            </tr>
        </thead>
        <tbody id="productsTable">
            @foreach (var product in Model.Products)
            {
                <tr>
                    <th scope="row">@product.ProductID</th>
                    <td>@product.ProductName</td>
                    <td>@product.Quantity</td>
                </tr>
            }
        </tbody>
    </table>
</div>

<h2 class="text-center">Goms loves omu, omu loves Goms</h2>

@section scripts {
    <script>
        // Search and Filter
        $("#searchInput").on("keyup", function () {
            var value = $(this).val().toLowerCase();
            $("#productsTable tr").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1);
            });
        });

        // Sorting
        $("th[data-sort]").on("click", function () {
            var column = $(this).data("sort");
            var order = $(this).hasClass("sorted-asc") ? "desc" : "asc";

            $("#productsTable tr").sort(function (a, b) {
                var aValue = $(a).find("td").eq(column).text();
                var bValue = $(b).find("td").eq(column).text();

                if (!isNaN(aValue) && !isNaN(bValue)) {
                    return order === "asc" ? aValue - bValue : bValue - aValue;
                } else {
                    return order === "asc" ? aValue.localeCompare(bValue) : bValue.localeCompare(aValue);
                }
            }).appendTo("#productsTable");

            $("th[data-sort]").removeClass("sorted-asc sorted-desc");
            $(this).addClass("sorted-" + order);
        });
    </script>
}
